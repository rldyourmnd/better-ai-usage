#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TERM_DIR="${SCRIPT_DIR}/../rldyourterm"

if [[ ! -d "$TERM_DIR" ]]; then
  echo "rldyourterm source not found at $TERM_DIR" >&2
  exit 1
fi

cd "$TERM_DIR"

echo "Launching rldyourterm from local source snapshot (cargo release)"
if [[ -n "${RLDYOURTERM_BIN_NAME:-}" ]]; then
  cargo run --release --bin "$RLDYOURTERM_BIN_NAME" -- start "$@"
  exit 0
fi

cargo run --release -- start "$@"
